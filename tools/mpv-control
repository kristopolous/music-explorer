#!/bin/bash
host=192.168.0.50
# this is a mapping of 
#
#   /usr/include/X11/keysymdef.h and
#   http://man.openbsd.org/OpenBSD-current/man1/tmux.1#KEY_BINDINGS
#

if [[ $1 == 'd' ]]; then
  tmp=$(mktemp)
  ssh $host "~/bin/mpv-details" > $tmp
  xmessage -timeout 14 -file $tmp
  rm $tmp
  exit
elif [[ $1 == '9' ]]; then
  ssh $host "amixer -D pulse sset Master 4%-"
  exit
elif [[ $1 == '0' ]]; then
  ssh $host "amixer -D pulse sset Master 4%+"
  exit
fi

declare -A mapping=( [p]='pu ENTER' [return]='ENTER' [space]='" "' [comma]='<' [period]='>' [s]='s ENTER' [r]='r ENTER' )
[[ ${mapping[$1]+_} ]] && control=${mapping[$1]} || control=$1

# debugging
# echo $(date) "$1->($control)" >> /tmp/keycode
#

ssh $host "tmux send-keys -t mpv-once $control"
